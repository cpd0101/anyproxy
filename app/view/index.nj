<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta name="keywords" content="{{ name }},Proxy,Google,Shadowsocks" />
    <meta name="description" content="Online Web Proxy 在线网页代理" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <title>{{ name }} 在线网页代理</title>
    <link rel="stylesheet" href="https://gw.alipayobjects.com/os/rmsportal/cupayaBkBRxHECKcstzD.css" />
  </head>
  <body>
    <div style="position:relative;min-height:100vh;overflow-x:hidden;">
      <div class="text-center" style="margin:45px 0 30px;"><h2>在线网页代理</h2></div>
      <div class="text-center">
        <a target="_self" href="{{ href }}">
          <img width="300" height="80" src="{{ logo }}" />
        </a>
      </div>
      <form class="form-horizontal" style="margin:0;padding:45px 0;">
        <div class="form-group">
          <div class="col-sm-4 col-sm-offset-4 col-xs-10 col-xs-offset-1">
            <input type="url" class="form-control" name="target" placeholder="输入URL，例如 https://www.google.com.hk">
          </div>
        </div>
        <div class="text-center" style="margin:15px 0 0;">
          <button type="submit" style="margin-right:15px;" class="btn btn-primary">Go To Proxy</button>
          <button id="google" class="btn btn-default">Go To Google</button>
        </div>
      </form>
      <div class="text-center">
        <a id="ss-account" style="color:#d43f3a;text-decoration:underline;">免费领取 shadowsocks 配置账号</a>
      </div>
      <div class="text-center" style="padding:15px 0 0;">
        <img width="160" height="160" src="https://gw.alipayobjects.com/zos/rmsportal/kRCtAiweuVBXFACuizoz.jpg" />
        <img width="160" height="160" src="https://gw.alipayobjects.com/zos/rmsportal/IpudeejsIinMngrraMKT.jpg" />
      </div>
      <div class="text-center" style="padding:5px 10px 60px;font-size:12px;">
        用支付宝扫一扫红色红包码，每天都能领取一个红包。<br />领取红包后可打赏给蓝色收款码，帮助本站扩充带宽。
      </div>
      <div class="text-center" style="position:absolute;bottom:0;width:100%;padding:15px 0;">
        &copy;{{ year }}&nbsp;
        {{ name }}&nbsp;
        <a target="_blank" href="/feedback">意见反馈</a>
      </div>
    </div>
    <script src="https://gw.alipayobjects.com/os/rmsportal/JdEpaOqbNgKDgeKLvRXV.js"></script>
    <script src="https://gw.alipayobjects.com/os/rmsportal/qJcJXiKVpwXIkTwucUKy.js"></script>
    <script>window.DOMAIN_WHITE_LIST = {{ DOMAIN_WHITE_LIST }}</script>
    <script>
      $('form').on('submit', function (e) {
        e.preventDefault();
        var val = $('input[name="target"]').val();
        if (!/^http(s)?\:/.test(val)) {
          return alert('请输入正确的网址');
        }
        var reg = window.DOMAIN_WHITE_LIST || /^http(s)?\:\/\/(.+\.)?(anyproxy|proxyit|baidu|zhihu|sohu|alipayobjects|bdstatic|gtimg|qq)\.(cc|cn|com|net|org)/i;
        if (reg.test(val)) {
          window.open(val);
        } else {
          window.open('/proxy?target=' + btoa(encodeURI(val)));
        }
      });
      $('#google').on('click', function (e) {
        e.preventDefault();
        var target = btoa(encodeURI('https://www.google.com.hk'));
        window.open('/proxy?target=' + target);
      });
      $('#ss-account').on('click', function (e) {
        window._hmt = window._hmt || [];
        var _csrf = Cookies.get('csrfToken');
        _hmt.push(['_trackEvent', 'ss', 'acquire-click']);
        $.post('/ss/queryConfig', {
          _csrf: _csrf
        }, function (data) {
          _hmt.push(['_trackEvent', 'ss', 'acquire-success']);
          alert(JSON.stringify(data));
        }, 'json').fail(function (e) {
          _hmt.push(['_trackEvent', 'ss', 'acquire-failure']);
          alert('出错啦~');
          location.reload();
        });
      });
      window.onunload = window.onbeforeunload = function (e) {
        Object.keys(Cookies.get()).map(function (key) {
          Cookies.remove(key, { path: location.pathname, domain: location.hostname });
          Cookies.remove(key, { path: location.pathname, domain:  '.' + location.hostname });
        });
        return 'Are you sure to leave?';
      };
      if (navigator.serviceWorker && location.protocol === 'https:') {
        navigator.serviceWorker.register('/service-worker.js');
      }
    </script>
    <script src="https://hm.baidu.com/hm.js?9ec911f310714b9fcfafe801ba8ae42a"></script>
    <script src="https://zz.bdstatic.com/linksubmit/push.js"></script>
  </body>
</html>