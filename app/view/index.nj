<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="keywords" content="{{ name }}, Google, Free, Online, Web, Proxy, 谷歌, 免费, 在线, 网页, 代理, 国外" />
    <meta name="description" content="Free Online Web Proxy 免费在线网页代理" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
    <link rel="shortcut icon" href="/public/favicon.ico" /> 
    <title>{{ name }} 免费在线网页代理</title>
    <link rel="stylesheet" href="/public/bootstrap.min.css" />
  </head>
  <body>
    <div style="position:relative;min-height:100%;overflow-x:hidden;">
      <div class="text-center" style="margin:45px 0 30px;"><h2>免费在线网页代理</h2></div>
      <div class="text-center">
        <a target="_self" href="{{ href }}">
          <img width="320" height="86" src="{{ logo }}" />
        </a>
      </div>
      <form class="form-horizontal" style="padding:90px 0;">
        <div class="form-group">
          <div class="col-sm-4 col-sm-offset-4 col-xs-10 col-xs-offset-1">
            <input type="url" class="form-control" name="target" placeholder="输入URL，例如 https://www.google.com.hk">
          </div>
        </div>
        <div class="text-center" style="margin:15px 0;">
          <button type="submit" style="margin-right:15px;" class="btn btn-primary">Go To Proxy</button>
          <button id="google" class="btn btn-default">Go To Google</button>
        </div>
      </form>
      <div class="text-center" style="padding:0 0 60px;">
        <a id="ss-account" style="color:#d43f3a;text-decoration:underline;">免费领取 shadowsocks 配置账号</a>
      </div>
      <div class="text-center" style="position:absolute;bottom:0;width:100%;padding:15px 0;">&copy;{{ year }}&nbsp;{{ name }}&nbsp;<a target="_blank" href="/feedback">意见反馈</a></div>
    </div>
    <script src="/public/jquery.min.js"></script>
    <script src="/public/js-cookie.min.js"></script>
    <script>
      var _hmt = _hmt || [];
      $('form').on('submit', function (e) {
        e.preventDefault();
        var target = btoa(encodeURI($('input[name="target"]').val()));
        window.open('/proxy?target=' + target);
      });
      $('#google').on('click', function (e) {
        e.preventDefault();
        var target = btoa(encodeURI('https://www.google.com.hk'));
        window.open('/proxy?target=' + target);
      });
      $('#ss-account').on('click', function (e) {
        var _csrf = Cookies.get('csrfToken');
        _hmt.push(['_trackEvent', 'ss', 'acquire-click']);
        $.post('/ss/queryConfig', {
          _csrf: _csrf
        }, function (data) {
          _hmt.push(['_trackEvent', 'ss', 'acquire-success']);
          alert(JSON.stringify(data));
        }, 'json').fail(function (e) {
          _hmt.push(['_trackEvent', 'ss', 'acquire-failure']);
          alert('出错啦~');
          location.reload();
        });
      });
      window.onunload = window.onbeforeunload = function (e) {
        Object.keys(Cookies.get()).map(function (key) {
          Cookies.remove(key, { path: location.pathname, domain: location.hostname });
          Cookies.remove(key, { path: location.pathname, domain:  '.' + location.hostname });
        });
        return 'Are you sure to leave?';
      };
      if (navigator.serviceWorker && location.protocol === 'https:') {
        navigator.serviceWorker.register('/service-worker.js');
      }
    </script>
    <script src="//hm.baidu.com/hm.js?9ec911f310714b9fcfafe801ba8ae42a"></script>
  </body>
</html>